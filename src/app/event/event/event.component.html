<ng-container *ngIf="event$ | async as event">
  <div class="event__head">
    <div class="container">
      <div class="event__inner">
        <div class="event__thumbnail">
          <img
            [src]="
              event.thumbnailURL
                ? event.thumbnailURL
                : 'assets/images/no-image.png'
            "
            alt=""
          />
        </div>
        <dl class="event__data">
          <dt class="event__title">{{ event.title }}</dt>
          <dd class="event__description">{{ event.descliption }}</dd>
          <dd class="event__users">
            <div class="users">
              <figure
                class="users__owner users__item"
                [style.background-image]="'url(' + event.user?.avatarURL + ')'"
              >
                <img
                  class="users__owner-icon"
                  src="assets/images/crown.svg"
                  alt=""
                  width="20px"
                  height="20px"
                />
              </figure>
              <ng-container
                *ngFor="let participant of joinedUsers$ | async; index as i"
              >
                <figure
                  *ngIf="i < visibleaPrticipantCount"
                  class="users__item"
                  [style.background-image]="
                    'url(' + participant?.avatarURL + ')'
                  "
                ></figure>
              </ng-container>
              <div
                class="users__all-participant"
                *ngIf="joinedRemainingPrticipantCount"
              >
                ...他{{ joinedRemainingPrticipantCount }}名
              </div>
            </div>
          </dd>
          <div class="event__share">
            <button
              class="event__share-btn"
              (click)="copyUrl()"
              [cdkCopyToClipboard]="eventInvitateURL"
            >
              <mat-icon>content_copy</mat-icon>
              招待リンクをコピー
            </button>
          </div>
          <div class="event__actions">
            <button
              mat-icon-button
              aria-label="イベント設定"
              [matMenuTriggerFor]="eventMenu"
            >
              <mat-icon class="event__more">more_vert</mat-icon>
            </button>
            <mat-menu #eventMenu="matMenu">
              <a
                *ngIf="authServise.uid === event.ownerId"
                mat-menu-item
                routerLink="/event/{{ eventId }}/edit/"
              >
                <mat-icon>edit</mat-icon>
                <span>編集</span>
              </a>
              <button
                *ngIf="authServise.uid === event.ownerId"
                mat-menu-item
                (click)="openDeleteEventDialog()"
              >
                <mat-icon>delete</mat-icon>
                <span>削除</span>
              </button>
              <button
                mat-menu-item
                (click)="exitEventOpenDialog(event.ownerId)"
              >
                <mat-icon>person_off </mat-icon>
                <span>イベントから退会する</span>
              </button>
            </mat-menu>
          </div>
        </dl>
      </div>
    </div>
  </div>
  <app-image-list></app-image-list>
</ng-container>
